{% extends 'base.html.twig' %}

{% block title %}Création d'un compte{% endblock %}

{% block body %}
{% for label, messages in app.flashes(['success', 'warning', 'danger']) %}
    {% for message in messages %}
        <div class="alert alert-{{ label }} alert-dismissible fade show mt-3" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
{% endfor %}


    <div class="container">
        <div class="card mt-4 mb-4" style=" background-color: #f5f5ef; box-shadow: 5px 5px 15px rgba(0,0,0,0.9); text-align: center;">
            <div class="log container my-3">
                <h1 class="conect mb-3 text-dark">S'INSCRIRE</h1>
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-4 mt-4">
                        <a href="{{path('app_login')}}" class="nav-log" style="color:#bb362c">Se connecter</a>
                    </div>
                        {% if not is_granted('ROLE_USER') %}
                    <div class="col-12 col-md-6 col-lg-4 mt-4">
                        <a href="{{ path('app_register') }}" class="nav-log" style="color:#bb362c">Créer un nouveau compte</a>
                    </div>
                        {% endif %}
                    <div class="col-12 col-md-6 col-lg-4 mt-4">
                        <a href="{{ path('app_forgot_password_request') }}" class="nav-log" style="color:#bb362c">Réinitialiser votre mot de passe</a>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-12 mb-4 mt-4">
                    {{ form_start(registrationForm) }}
                        {{ form_row(registrationForm.email) }}
                        {{ form_row(registrationForm.pseudo) }}
                        {{ form_row(registrationForm.plainPassword, {
                            label: 'Mot de passe'
                        }) }}
                        {{ form_row(registrationForm.agreeTerms) }}

                        <button type="submit" class="btn-sm btn-secondary">S'inscrire</button>
                    {{ form_end(registrationForm) }}
                </div>
            </div>
        </div>
    </div>
    
{% endblock %}

{% block javascripts %}
<script>


    //on verifie si il y a des objets de la classe alert dans el dom de la page à l'aide du 
    //sélecteur jQuery $("") qui comme on sélectionne une classe nous renvoie un tableau
    //dont on verifie que la longeur est >0
    if($(".alert").length>0){
        //on crée une pause avec setTimeout qui déclenchera une fonction anonyme aprés 2 seconde
        setTimeout(function(){
            //On déclanche la disparition en fondu (animation de style css ) des alerts
            //Lorsque le fondu est effectué on supprime les alerts du dom avec remove();
            $(".alert").fadeOut(500, function(){ $(".alert").remove() });
        }, 2000);
    }

    
    
</script>
{% endblock %}
